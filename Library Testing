import tkinter as tk
from tkinter import *

#Classes
class Library:
    def __init__(self, ID):
        self.ID = ID
        self.bookList = []

    def showall(self):
        print(f"Books currently in the library: {len(self.bookList)}")
        counter = 0
        for i in self.bookList:
            counter += 1
            print(f"Book {counter}: {i.name}, {i.favourite}")

        print("Here's what the current library list looks like")
        print(self.bookList)
            
    def addBook(self):
        addABook = Toplevel(window)  # Create a new window
        addABook.title("Add Book")
        addABook.geometry("600x500")  
        Label(addABook, text="Add Books").place(x=150,y=0)
        Label(addABook, text="Name").place(x=30,y=250)
        Label(addABook, text="Link").place(x=30,y=400)
        Label(addABook, text="Description/Comments").place(x=350,y=100)

        bookName = Entry(addABook, text="Insert name...", bg="white", fg="black")
        link = Entry(addABook, text="Insert link...", bg="white", fg="black")
        description = Entry(addABook, text="Insert description...", bg="white", fg="black")

        bookName.place(x=30,y=300)
        link.place(x=30,y=450)
        description.place(x=350,y=150)

        Button(addABook, text="Cancel", command=nothing).place(x=400,y=350)
        Button(addABook, text="Add", command=lambda: self.add(bookName.get(), link.get(), description.get())).place(x=500,y=350)

    def add(self, title, link=None, description=None, favourite=""):
        print(title)
        with open ("bookList.csv", "a") as f:
            f.write(f"{title},{link},{description},{favourite}") 
            f.write("\n")

    def remove(self):
        pass

    def change(self):
        pass

    def filter(self):
        pass

    def read(self, book):
        self.bookList.append(book)

    def test(self):
        print("Works!")

class Book:
    def __init__(self, name, favourite=False, position=None):
        self.name = name
        self.favourite = favourite

    def show(self):
        print(self.name, self.position, "favourite:", self.favourite)

    def hover(self, event):
        pass


#Functions
def add():
    Librarby.addBook()

def remove():
    pass

def bookify(name, favourite=False):
    book = Book(name, favourite)
    Librarby.add(book)

def nothing():
    #Nothing happens
    pass

def read():
    pass

Librarby = Library(1)

with open("bookList.csv", 'r') as f:
    bookList = []
    for line in f:
        line = line.strip()
        a = line.split(',')
        bookList.append(a)

for object in bookList:
    name = object[1]
    favourite = bool(object[2]) #As long as object[2] = "", bool will return false.
    book = Book(name, favourite)
    Librarby.read(book)


#Code
#GUI settings
window = Tk()
window.title("Library")
window.geometry("650x650")

#Objects initialize
labelLibraryName = Label(window, text="Novels")

buttonEscape = Button(window, text="Escape", command=nothing)
buttonAdd = Button(window, text="Add", command=add)
buttonRemove = Button(window, text="Remove", command=remove)

buttonBook = Button(window, text="Book\ntest", command=read, width=2, height=5)

entrySearch = Entry(window, text="Search...", width=25)


labelLibraryName.place(x=200,y=0)

buttonEscape.place(x=0, y=0)
buttonAdd.place(x=450,y=30)
buttonRemove.place(x=550, y=30)

buttonBook.place(x=30,y=60)

entrySearch.place(x=400,y=0)

Librarby.showall()


window.mainloop()
