import tkinter as tk
from tkinter import *
import datetime                             #Datetime API
import requests 



class Library(tk.Tk): 
    def __init__(self, ID):
        super().__init__()                  
        self.ID = ID                        
        self.bookList = []                  
        self.ascending = True              
    
        self.title("")               
        self.geometry("650x650")                          

        self.filterOptions = ["Alphabetical", "Date added", "Favourite"]
        self.chosenFilter = StringVar()
        self.chosenFilter.set("Date added")


        self.LibraryName = Label(self, text="Novels")

        self.buttonEscape = Button(self, text="Escape", command=self.escape)
        self.buttonAdd = Button(self, text="Add", command=self.nothing)
        self.buttonRemove = Button(self, text="Remove", command=self.nothing)

        self.entrySearch = Entry(self, text="Search...", width=25)              

        self.optionMenuFilter = OptionMenu(self, self.chosenFilter, *self.filterOptions)

        self.LibraryName.place(x=200,y=0)
    
        self.buttonEscape.place(x=0, y=0)
        self.buttonAdd.place(x=450,y=30)
        self.buttonRemove.place(x=550, y=30)
        self.entrySearch.place(x=400,y=0)
        self.optionMenuFilter.place(x=280,y=5)

        self.optionMenuFilter.config(width=7)

        self.bind("<Escape>", self.escape)
        self.previousFilter = "Date added"

        self.initializeBooks()

    def readFile(self):
        with open("bookList.csv", 'r') as f:            
            self.LibraryBookList = []
            for book in f:                      #Loops through every line
                book = book.strip()
                list = book.split(',')          #Array format: Name, Date, Favourite, Title (format only for testing right now)
                date = list[1]          
                date = date.split()             #Converts the date entry into a list

                for i in range(0, len(date)):   #Converts the date data into integers to be used in the datetime.datetime function
                    date[i] = int(date[i])  
                list[1] = datetime.datetime(date[0], date[1], date[2], date[3], date[4], date[5])


    def initializeBooks(self):

        self.initialCoordinateX = 30
        self.initialCoordinateY = 60

        currentCoordinateX = self.initialCoordinateX                  #Creates a new variable to change
        currentCoordinateY = self.initialCoordinateY

        amountOfBooks = len(self.LibraryBookList)
        currentAmountOfBooks = 0

        for row in range(0,3):
            if currentAmountOfBooks >= amountOfBooks:
                break
            for column in range(0,9):
                if currentAmountOfBooks >= amountOfBooks:
                    break

                currentAmountOfBooks += 1
                book = Book(self, text="place\nholder", width=2, height=5)     
                book.configure(command=book.nothing)
                book.place(x=currentCoordinateX,y=currentCoordinateY)  
                self.LibraryBookList.append(book)                                   #List so the books can be accessed for searching and filtering
                currentCoordinateX = currentCoordinateX + 50                        #Increments the x every iteration to place the next book
            currentCoordinateX = self.initialCoordinateX                            #Resets to the original x value every new row
            currentCoordinateY = currentCoordinateY + 100                           #Increments the y value every new row.


        pass

    def escape(self, event=None):
        self.destroy()

    def nothing(self):
        pass

class Book(tk.Button):              #Inherits from tk button
    def __init__(self, parent, *args, **kwargs):
        tk.Button.__init__(self, parent, *args, **kwargs)
        self.parent = parent

    def press(self):
        print(self.number)
    
    def nothing(self):
        pass


if __name__ == "__main__":          #Runs the code
    window = Library(1)             #Library has ID of 1
    window.mainloop()
